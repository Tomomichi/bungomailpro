- content_for :breadcrumb do
  作成チャネル

%h1.ui.huge.header
  %i.icon.rss
  作成したチャネル

.ui.stackable.grid
  .ui.three.columns.row
    - @channels.each do |channel|
      .ui.column
        - subscription = current_user.subscriptions.find_by(channel_id: channel.id)
        .ui.fluid.card
          .content
            .header
              = link_to channel.title, channel_path(channel.token)
              - if !channel.public?
                %small(data-tooltip="非公開" data-inverted="true")
                  %i.small.lock.icon
            .description
              - if subscription
                - if subscription.current_book_id
                  %span.ui.orange.mini.label 配信中
                - else
                  %span.ui.mini.label 配信終了
              = channel.description.truncate(50)
          .extra.content
            - if channel.books_count == 0
              .ui.warning.message
                .content
                  まだ本が登録されていないようです。「編集」ボタンから本を追加して配信開始しましょう！
            - else
              .ui.small.list
                .item
                  %i.icon.book
                  #{channel.books_count}冊
                - if subscription
                  .item
                    %i.icon.podcast
                    - if subscription.current_chapter
                      = "#{subscription.current_book.author}『#{subscription.current_book.title}』"
                      = "##{subscription.current_chapter.index}（全#{subscription.current_book.chapters_count}回）"
                  .item
                    %i.icon.clock.outline
                    #{subscription.delivery_hour}:00
          .extra.content
            - if subscription
              = link_to '配信設定', edit_subscription_path(subscription.token), class: 'ui red basic small button'
            = link_to '編集', edit_channel_path(channel.token), class: "ui primary basic small button"

    .ui.column
      .ui.placeholder.segment
        .ui.icon.header
          %i.grey.icon.rss
          = link_to 'チャネルを作成する', new_channel_path, class: 'ui primary small button'
          -# .ui.horizontal.divider OR
          -# = link_to '公開チャネルを購読する', channels_path, class: 'ui small button'
